
# 서버 이중화 (Server Redundancy)

서버 이중화는 시스템의 **고가용성(High Availability, HA)**과 **내결함성(Fault Tolerance)**을 확보하기 위한 핵심적인 기술입니다. 단일 서버에서 발생할 수 있는 장애(Single Point of Failure, SPOF)로 인해 서비스가 중단되는 것을 방지하고, 안정적인 서비스 제공을 목표로 합니다.

## 1. 정의 및 목적

*   **정의:** 동일하거나 유사한 기능을 수행하는 서버를 두 대 이상 구성하여, 한 서버에 문제가 발생하더라도 다른 서버가 그 역할을 대신하여 서비스 중단 없이 지속적으로 운영될 수 있도록 하는 기술이다.
*   **주요 목적:**
    *   **고가용성 확보:** 서비스 중단 시간을 최소화하고, 24시간 365일 안정적인 서비스 제공.
    *   **내결함성 증대:** 하드웨어, 소프트웨어, 네트워크 등 특정 구성 요소의 장애 발생 시에도 시스템 전체가 정상 작동하도록 보장.
    *   **재해 복구(Disaster Recovery, DR):** 자연재해나 대규모 장애 발생 시에도 서비스를 복구하고 데이터를 보호.
    *   **성능 향상 및 확장성:** 트래픽 분산 및 부하 분산을 통해 서비스 처리량 증대 및 향후 확장 용이성 확보.

## 2. 핵심 개념

*   **단일 장애점(Single Point of Failure, SPOF):** 시스템 내에서 해당 구성 요소가 고장 나면 전체 시스템이 작동을 멈추게 되는 지점. 서버 이중화는 SPOF를 제거하는 것이 목표이다.
*   **RTO (Recovery Time Objective):** 장애 발생 후 서비스를 정상 상태로 복구하는 데 허용되는 최대 시간.
*   **RPO (Recovery Point Objective):** 장애 발생 시 허용 가능한 최대 데이터 손실량.

## 3. 서버 이중화의 주요 기술 및 방법

### 3.1. 로드 밸런싱 (Load Balancing)

*   **개념:** 여러 대의 서버에 네트워크 트래픽을 효율적으로 분산시켜 특정 서버에 부하가 집중되는 것을 방지하고, 각 서버의 자원을 최적으로 활용하는 기술.
*   **작동 방식:** 로드 밸런서가 클라이언트 요청을 받아 여러 백엔드 서버 중 하나로 전달한다. 특정 서버에 장애가 발생하면 해당 서버로는 트래픽을 보내지 않는다.
*   **장점:** 성능 향상, 가용성 증대, 확장성 용이.
*   **단점:** 로드 밸런서 자체가 SPOF가 될 수 있으므로, 로드 밸런서 자체도 이중화해야 한다.
*   **예시:** L4/L7 스위치, NGINX, HAProxy, AWS ELB, Azure Load Balancer.

### 3.2. 클러스터링 (Clustering)

여러 대의 서버를 하나의 논리적인 시스템처럼 묶어 고가용성 및 부하 분산을 제공하는 기술.

*   **액티브-스탠바이 (Active-Standby) / 액티브-패시브 (Active-Passive) 클러스터:**
    *   **개념:** 한 대의 서버(Active)가 서비스를 제공하고, 다른 서버(Standby/Passive)는 대기 상태로 있다가 Active 서버에 장애 발생 시 Standby 서버가 Active 서버의 역할을 인계받아 서비스를 재개한다.
    *   **장점:** 구현이 비교적 단순하고, 데이터 일관성 유지가 용이.
    *   **단점:** Standby 서버는 평소에 유휴 상태이므로 자원 활용 효율이 낮다. Failover(장애 인계) 시 약간의 서비스 중단 시간이 발생할 수 있다.
    *   **예시:** MS SQL Server Failover Cluster Instance, Pacemaker + Corosync.

*   **액티브-액티브 (Active-Active) 클러스터:**
    *   **개념:** 여러 대의 서버가 동시에 서비스를 제공하며, 각 서버가 활성 상태로 트래픽을 처리한다. 한 서버에 장애가 발생하면 나머지 서버들이 남은 트래픽을 처리한다.
    *   **장점:** 자원 활용 효율이 높고, 서비스 중단 없이 부하 분산 및 성능 향상 가능.
    *   **단점:** 데이터 일관성 유지 및 동기화가 복잡하고, 설계 및 구현 난이도가 높다.
    *   **예시:** 웹 서버 클러스터(로드 밸런서와 연동), 분산 데이터베이스 시스템.

### 3.3. 데이터 복제 (Data Replication)

*   **개념:** 데이터베이스나 파일 시스템의 데이터를 여러 서버나 저장소에 복사하여 보관하는 기술. 서버 장애 시 데이터 손실을 방지하고 빠른 복구를 가능하게 한다.
*   **종류:**
    *   **동기식 복제 (Synchronous Replication):** 데이터가 양쪽 서버에 모두 기록된 후에만 트랜잭션을 완료로 간주. 데이터 일관성이 매우 높지만, 성능 저하가 발생할 수 있다.
    *   **비동기식 복제 (Asynchronous Replication):** 데이터가 한 서버에 기록되면 즉시 트랜잭션을 완료로 간주하고, 다른 서버에는 나중에 복사. 성능은 좋지만, 장애 시 약간의 데이터 손실 가능성(RPO > 0)이 있다.
*   **예시:** 데이터베이스 미러링/복제 (MySQL Replication, PostgreSQL Streaming Replication, MS SQL Server AlwaysOn), 분산 파일 시스템 (HDFS).

### 3.4. 재해 복구 시스템 (Disaster Recovery System)

*   **개념:** 지진, 화재와 같은 대규모 재해로 인해 주 데이터 센터 전체가 마비될 경우를 대비하여, 지리적으로 떨어진 다른 위치에 백업 시스템을 구축하는 것.
*   **핫 사이트 (Hot Site):** 주 센터와 동일한 수준의 시스템을 상시 운영하며 데이터를 동기화. RTO, RPO가 매우 낮다.
*   **웜 사이트 (Warm Site):** 주 센터의 핵심 시스템만 부분적으로 운영하거나, 데이터를 주기적으로 동기화. 핫 사이트보다 비용이 적게 들지만, RTO, RPO가 핫 사이트보다 높다.
*   **콜드 사이트 (Cold Site):** 최소한의 인프라만 갖추고 있다가 재해 발생 시 장비 설치 및 복구 작업을 시작. 비용이 가장 적게 들지만, RTO, RPO가 매우 높다.
*   **클라우드 기반 DR:** 클라우드 서비스(AWS, Azure, GCP)를 활용하여 유연하고 비용 효율적인 DR 시스템 구축.

## 4. 고려 사항

*   **비용:** 이중화를 위한 추가 하드웨어, 소프트웨어, 네트워크 장비 및 관리 비용이 발생한다.
*   **복잡성:** 시스템 아키텍처가 복잡해지고, 구성 및 관리가 어려워질 수 있다.
*   **데이터 일관성:** 특히 액티브-액티브 구성이나 분산 환경에서 데이터 일관성을 유지하는 것이 매우 중요하다.
*   **네트워크 대역폭:** 데이터 복제 시 네트워크 대역폭 요구량이 증가할 수 있다.
*   **테스트:** 이중화 시스템의 실제 작동 여부를 주기적으로 테스트하여 장애 발생 시 정상적으로 Failover 되는지 확인해야 한다.

서버 이중화는 현대 IT 시스템에서 안정적인 서비스를 제공하기 위한 필수적인 요소이며, 시스템의 중요도와 예산에 따라 적절한 이중화 전략을 선택하고 구현해야 한다.
